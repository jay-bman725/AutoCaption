<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoCaption</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Draggable title bar -->
    <div class="title-bar">
        <div class="title-bar-content">
            <span class="app-title">AutoCaption</span>
        </div>
    </div>
    
    <div class="container">
        <!-- Onboarding Modal -->
        <div id="onboarding-modal" class="modal onboarding-modal">
            <div class="modal-content onboarding-modal-content">
                <div class="modal-header">
                    <h2 id="onboarding-title">üé¨ Welcome to AutoCaption!</h2>
                </div>
                <div class="modal-body onboarding-modal-body">
                    <!-- Step 1: Welcome -->
                    <div id="onboarding-step-welcome" class="onboarding-step active">
                        <div class="onboarding-content">
                            <div class="onboarding-icon">üé¨</div>
                            <h3>Welcome to AutoCaption!</h3>
                            <p>AutoCaption is your AI-powered solution for generating professional captions and subtitles for your videos and audio files.</p>
                            
                            <div class="feature-list">
                                <div class="feature-item">
                                    <span class="feature-icon">üéØ</span>
                                    <div class="feature-text">
                                        <strong>High Accuracy</strong>
                                        <p>Powered by OpenAI's Whisper AI for industry-leading transcription accuracy</p>
                                    </div>
                                </div>
                                <div class="feature-item">
                                    <span class="feature-icon">üé¨</span>
                                    <div class="feature-text">
                                        <strong>Multiple Formats</strong>
                                        <p>Supports video files (MP4, AVI, MOV) and audio files (MP3, WAV, M4A)</p>
                                    </div>
                                </div>
                                <div class="feature-item">
                                    <span class="feature-icon">‚ö°</span>
                                    <div class="feature-text">
                                        <strong>Fast Processing</strong>
                                        <p>Automatic file conversion and compression for optimal transcription speed</p>
                                    </div>
                                </div>
                                <div class="feature-item">
                                    <span class="feature-icon">üìÑ</span>
                                    <div class="feature-text">
                                        <strong>SRT Output</strong>
                                        <p>Generates standard SubRip (.srt) files compatible with all video editors</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: API Key Setup -->
                    <div id="onboarding-step-apikey" class="onboarding-step">
                        <div class="onboarding-content">
                            <div class="onboarding-icon">üîë</div>
                            <h3>Setup OpenAI API Key</h3>
                            <p>AutoCaption uses OpenAI's Whisper API for transcription. You'll need an API key to get started.</p>
                            
                            <div class="step-status" id="apikey-step-status">
                                <span class="status-icon">‚è≥</span>
                                <span class="status-text">API key required</span>
                            </div>
                            
                            <div class="onboarding-input-group">
                                <label for="onboarding-api-key-input">OpenAI API Key</label>
                                <input type="password" id="onboarding-api-key-input" placeholder="sk-...">
                                <button id="onboarding-validate-key-btn" class="btn btn-secondary">
                                    <span id="onboarding-validate-text">Validate Key</span>
                                    <div id="onboarding-validate-spinner" class="spinner" style="display: none;"></div>
                                </button>
                            </div>
                            
                            <div class="onboarding-help">
                                <p><strong>Need an API key?</strong></p>
                                <p>1. Visit <a href="https://platform.openai.com/api-keys" id="onboarding-openai-link">OpenAI Platform</a></p>
                                <p>2. Create a new API key</p>
                                <p>3. Copy and paste it above</p>
                                <p class="cost-note">üí∞ <em>Note: OpenAI charges per minute of audio transcribed (~$0.006/minute)</em></p>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3: Theme Selection -->
                    <div id="onboarding-step-theme" class="onboarding-step">
                        <div class="onboarding-content">
                            <div class="onboarding-icon">üé®</div>
                            <h3>Choose Your Theme</h3>
                            <p>Select your preferred appearance. You can change this later in Settings.</p>
                            
                            <div class="step-status" id="theme-step-status">
                                <span class="status-icon">‚è≥</span>
                                <span class="status-text">Theme selection required</span>
                            </div>
                            
                            <div class="theme-options">
                                <div class="theme-option" data-theme="system">
                                    <div class="theme-preview">
                                        <div class="theme-preview-header">
                                            <div class="theme-preview-dot"></div>
                                            <div class="theme-preview-dot"></div>
                                            <div class="theme-preview-dot"></div>
                                        </div>
                                        <div class="theme-preview-body system-preview">
                                            <div class="theme-preview-sidebar"></div>
                                            <div class="theme-preview-content">
                                                <div class="theme-preview-line"></div>
                                                <div class="theme-preview-line short"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="theme-option-info">
                                        <h4>üñ•Ô∏è System Default</h4>
                                        <p>Automatically follows your system theme</p>
                                    </div>
                                </div>
                                
                                <div class="theme-option" data-theme="light">
                                    <div class="theme-preview">
                                        <div class="theme-preview-header light">
                                            <div class="theme-preview-dot"></div>
                                            <div class="theme-preview-dot"></div>
                                            <div class="theme-preview-dot"></div>
                                        </div>
                                        <div class="theme-preview-body light">
                                            <div class="theme-preview-sidebar"></div>
                                            <div class="theme-preview-content">
                                                <div class="theme-preview-line"></div>
                                                <div class="theme-preview-line short"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="theme-option-info">
                                        <h4>‚òÄÔ∏è Light Mode</h4>
                                        <p>Clean and bright interface</p>
                                    </div>
                                </div>
                                
                                <div class="theme-option" data-theme="dark">
                                    <div class="theme-preview">
                                        <div class="theme-preview-header dark">
                                            <div class="theme-preview-dot"></div>
                                            <div class="theme-preview-dot"></div>
                                            <div class="theme-preview-dot"></div>
                                        </div>
                                        <div class="theme-preview-body dark">
                                            <div class="theme-preview-sidebar"></div>
                                            <div class="theme-preview-content">
                                                <div class="theme-preview-line"></div>
                                                <div class="theme-preview-line short"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="theme-option-info">
                                        <h4>üåô Dark Mode</h4>
                                        <p>Easy on the eyes for long sessions</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 4: Complete -->
                    <div id="onboarding-step-complete" class="onboarding-step">
                        <div class="onboarding-content">
                            <div class="onboarding-icon">üéâ</div>
                            <h3>You're All Set!</h3>
                            <p>AutoCaption is now configured and ready to use. Here's what you can do next:</p>
                            
                            <div class="completion-checklist">
                                <div class="checklist-item">
                                    <span class="checklist-icon">‚úÖ</span>
                                    <span>API key configured and validated</span>
                                </div>
                                <div class="checklist-item">
                                    <span class="checklist-icon">‚úÖ</span>
                                    <span>Theme preference saved</span>
                                </div>
                                <div class="checklist-item">
                                    <span class="checklist-icon">‚úÖ</span>
                                    <span>Ready to generate captions</span>
                                </div>
                            </div>
                            
                            <div class="next-steps">
                                <h4>Quick Start:</h4>
                                <ol>
                                    <li>Click "Get Started" to begin</li>
                                    <li>Upload your video or audio file</li>
                                    <li>Click "Generate Captions"</li>
                                    <li>Download or copy your SRT file</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer onboarding-footer">
                    <div class="onboarding-progress">
                        <div class="progress-bar">
                            <div id="onboarding-progress-fill" class="progress-fill"></div>
                        </div>
                        <span id="onboarding-step-counter">1 of 4</span>
                    </div>
                    <div class="onboarding-actions">
                        <button id="onboarding-back-btn" class="btn btn-outline" style="display: none;">Back</button>
                        <button id="onboarding-skip-btn" class="btn btn-outline">Skip</button>
                        <button id="onboarding-next-btn" class="btn btn-primary">Next</button>
                        <button id="onboarding-finish-btn" class="btn btn-primary" style="display: none;">Get Started</button>
                    </div>
                </div>
            </div>
        </div>

        <header>
            <div class="header-content">
                <h1>AutoCaption</h1>
                <p>Generate professional captions for your videos.</p>
            </div>
        </header>

        <main>
            <!-- Settings Modal -->
            <div id="settings-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>‚öôÔ∏è Settings</h2>
                        <button id="close-settings-btn" class="btn btn-icon">‚úñÔ∏è</button>
                    </div>
                    <div class="modal-body">
                        <div class="setting-group">
                            <h3>üé® Appearance</h3>
                            <div class="setting-item">
                                <label class="setting-label">Theme</label>
                                <select id="theme-select" class="setting-select">
                                    <option value="system">System Default</option>
                                    <option value="light">Light</option>
                                    <option value="dark">Dark</option>
                                </select>
                                <p class="setting-description">Choose your preferred theme. System Default will follow your system's theme settings.</p>
                            </div>
                        </div>
                        <div class="setting-group">
                            <h3>üîë API Key Management</h3>
                            <div class="setting-item">
                                <label class="setting-label">Current API Key Status</label>
                                <div id="settings-api-key-status" class="api-key-status-display">
                                    <span id="settings-api-key-indicator">üîÑ Checking...</span>
                                </div>
                                <p class="setting-description">Manage your OpenAI API key used for transcription.</p>
                            </div>
                            <div class="setting-item">
                                <div class="api-key-actions">
                                    <button id="settings-change-api-key-btn" class="btn btn-secondary">
                                        <span>üîÑ Change API Key</span>
                                    </button>
                                    <button id="settings-remove-api-key-btn" class="btn btn-outline btn-danger">
                                        <span>üóëÔ∏è Remove API Key</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="setting-group">
                            <h3>üîÑ Updates</h3>
                            <div class="setting-item">
                                <label class="setting-label">
                                    <input type="checkbox" id="auto-check-updates" checked>
                                    <span class="checkmark"></span>
                                    Automatically check for updates every hour
                                </label>
                                <p class="setting-description">When enabled, AutoCaption will check for new versions in the background.</p>
                            </div>
                            <div class="setting-item">
                                <button id="manual-check-updates-btn" class="btn btn-secondary">
                                    <span>üîç Check for Updates Now</span>
                                </button>
                                <div id="last-check-info" class="setting-info"></div>
                            </div>
                        </div>
                        <div class="setting-group">
                            <h3>‚ÑπÔ∏è About</h3>
                            <div class="setting-item">
                                <p><strong>Version:</strong> 1.5.1</p>
                                <p><strong>Made with ‚ù§Ô∏è by Jay</strong></p>
                                <p>Using OpenAI Whisper for AI-powered transcription</p>
                            </div>
                        </div>
                        <div class="setting-group">
                            <h3>üêõ Debug</h3>
                            <div class="setting-item">
                                <button id="show-debug-logs-btn" class="btn btn-secondary">
                                    <span>üìÑ Show Debug Logs</span>
                                </button>
                                <p class="setting-description">Open the debug log file to view detailed application logs for troubleshooting.</p>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="save-settings-btn" class="btn btn-primary">Save Settings</button>
                        <button id="cancel-settings-btn" class="btn btn-outline">Cancel</button>
                    </div>
                </div>
            </div>

            <!-- Update Dialog Modal -->
            <div id="update-modal" class="modal">
                <div class="modal-content update-modal-content">
                    <div class="modal-header">
                        <h2>üéâ Update Available!</h2>
                        <button id="close-update-btn" class="btn btn-icon">‚úñÔ∏è</button>
                    </div>
                    <div class="modal-body update-modal-body">
                        <div class="update-info">
                            <p><strong>Current version:</strong> <span id="current-version"></span></p>
                            <p><strong>New version:</strong> <span id="new-version"></span></p>
                            <p>A new version of AutoCaption is available! Would you like to download it?</p>
                        </div>
                        
                        <div class="changelog-section">
                            <h3>üìã What's New</h3>
                            <div id="changelog-container" class="changelog-container">
                                <div id="changelog-content"></div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="download-update-btn" class="btn btn-primary">
                            <span>üì• Download Update</span>
                        </button>
                        <button id="later-update-btn" class="btn btn-secondary">Later</button>
                    </div>
                </div>
            </div>

            <!-- API Key Setup -->
            <div id="api-key-section" class="section" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <h2>üîë OpenAI API Key</h2>
                        <p class="card-subtitle">Enter your API key to get started with AI-powered transcription</p>
                    </div>
                    <div class="input-group">
                        <input type="password" id="api-key-input" placeholder="sk-..." autocomplete="off">
                        <button id="set-api-key-btn" class="btn btn-primary">
                            <span>Set API Key</span>
                        </button>
                    </div>
                    <p class="help-text">
                        üîó Get your API key from <a href="https://platform.openai.com/api-keys" id="openai-api-link">OpenAI Platform</a>
                    </p>
                    <div id="api-key-status" class="status"></div>
                    <div id="change-api-key-section" style="display: none;">
                        <button id="change-api-key-btn" class="btn btn-outline">Change API Key</button>
                    </div>
                </div>
            </div>

            <!-- File Upload -->
            <div id="upload-section" class="section">
                <div class="card">
                    <div class="card-header">
                        <h2>üìÅ Upload Media File</h2>
                        <p class="card-subtitle">Support for audio and video files (MP3, WAV, MP4, MOV, and more). Videos will be converted to MP3. Large audio files will be compressed if needed to meet the 25MB limit.</p>
                    </div>
                    <div class="upload-area" id="upload-area">
                        <div class="upload-content">
                            <div class="upload-icon">üéµ</div>
                            <h3>Drag and drop your file here</h3>
                            <p>or</p>
                            <button id="select-file-btn" class="btn btn-secondary">
                                <span>üìÇ Browse Files</span>
                            </button>
                        </div>
                    </div>
                    <div id="file-info" class="file-info" style="display: none;">
                        <div class="file-details">
                            <div class="file-meta">
                                <span class="file-icon">üìÑ</span>
                                <span id="file-name"></span>
                            </div>
                            <button id="remove-file-btn" class="btn btn-outline">
                                <span>üóëÔ∏è Remove</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Generate Section -->
            <div id="generate-section" class="section" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <h2>‚ö° Generate Captions</h2>
                        <p class="card-subtitle">AI will compress and transcribe your media file. All files are compressed to MP3 format and must be under 25MB after compression (OpenAI limit).</p>
                    </div>
                    <button id="generate-btn" class="btn btn-primary btn-large">
                        <span id="generate-btn-text">üöÄ Generate SRT Captions</span>
                        <div id="generate-spinner" class="spinner" style="display: none;"></div>
                    </button>
                    <div id="generation-status" class="status"></div>
                </div>
            </div>

            <!-- Results Section -->
            <div id="results-section" class="section" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <h2>üìù Generated Captions</h2>
                        <p class="card-subtitle">Your captions are ready! Preview, copy, or download them below</p>
                    </div>
                    <div class="results-actions">
                        <button id="preview-btn" class="btn btn-secondary">
                            <span>üëÅÔ∏è Preview</span>
                        </button>
                        <button id="copy-btn" class="btn btn-secondary">
                            <span>üìã Copy to Clipboard</span>
                        </button>
                        <button id="download-btn" class="btn btn-primary">
                            <span>üíæ Download SRT</span>
                        </button>
                    </div>
                    <div id="srt-preview" class="srt-preview" style="display: none;">
                        <pre id="srt-content"></pre>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <div class="footer-content">
                <p>Made with ‚ù§Ô∏è By Jay, using OpenAI Whisper</p>
                <div class="footer-links">
                    <span>Fast & Accurate</span>
                    <span>‚Ä¢</span>
                    <span>Privacy Focused</span>
                    <span>‚Ä¢</span>
                    <span>Professional Quality</span>
                </div>
            </div>
        </footer>

        <!-- Settings Button Section -->
        <div class="settings-section">
            <button id="settings-btn" class="btn btn-settings">
                <span>‚öôÔ∏è Settings</span>
            </button>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
